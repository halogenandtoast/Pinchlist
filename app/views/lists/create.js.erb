$('table tr').append("<%= escape_javascript(render(current_user.proxy_for(@list), :filter => :current)) %>");
$('.picker').colorPicker();
$('#new_task_title_<%= @list.id %>').focus();
$('#list_title').val("");
$('#new_task_<%= @list.id %>').bind('submit', preventFurtherSubmissions);
$('#list_<%= @list.id %> form.share_form').bind('submit', preventFurtherSubmissions);
enable_task_sorting();
setup_color_pickers();

$("#list_<%= @list.id %> .share_link").click(function(e) {
  $(this).next(".share").toggle();
  $(this).next(".share").find("input[type=text]").focus()
});

$("#list_<%= @list.id %> .share_link").bind( "clickoutside", function(e){
  share = $(this).next(".share")
  target = $(e.target).parents(".share")
  if(target[0] != share[0]) {
    $(this).next(".share").hide();
  }
});

// show list actions

$("#list_<%= @list.id %> .list_actions_link").click(function(e) {
  $(this).next(".list_actions").toggle();
});

$("#list_<%= @list.id %> .list_actions_link").bind( "clickoutside", function(){
  $(this).next(".list_actions").hide();
});
