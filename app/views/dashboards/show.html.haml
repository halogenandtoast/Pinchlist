#header
  %h1
    = link_to 'ListApp', root_url
  = form_for @list do |form|
    %label.input{:for => "title"}
      %span New List
      = form.text_field :title
  %ul#util
    %li
      %a{:href => ""} Help
    %li= link_to 'Sign Out', destroy_user_session_path
    %li.username= link_to "#{@current_user.email}", edit_user_registration_path
#container
  %table{:cellpadding => "0", :cellspacing => "0"}
    %tr
      - unless @upcoming_tasks.empty?
        %td.list.upcoming
          .list_title
            %h3 Upcoming
            .today #{Time.now.strftime("%m/%d")}
          %ul#upcoming_tasks
            - @upcoming_tasks.each do |task|
              = content_tag_for(:li, task, :upcoming, :class => (task.completed ? 'completed' : nil)) do
                %span.date= task.due_date.strftime("%m/%d")
                %span.task_title= task.title
      - @lists.each do |list|
        %td[list]
          .list_title{:style => "background-color: ##{"%06x" % (rand * 0xffffff)};"}
            %h3= list.title
            .picker choose color
            = link_to 'delete list', list, :method => :delete, :confirm => "Are you sure you want to delete #{list.title}?", :class => 'delete'
          = form_for [list, Task.new], :html => { :class => 'newtask', :id => "new_task_#{list.id}" } do |form|
            = form.text_field :title, :id => "new_task_title_#{list.id}", :autocomplete => "off"
          - unless list.tasks.empty?
            %ul
              - list.tasks.each do |task|
                = content_tag_for(:li, task, :class => (task.completed ? 'completed' : nil)) do
                  - if task.due_date?
                    %span.date= task.due_date.strftime("%m/%d")
                  %span.task_title= task.title
