if($('#list_<%=@list.id%> ul li.completed').length > 0) {
  $('#list_<%= @list.id %> ul li.completed:first').before("<%= escape_javascript(render(@task)) %>");
} else {
  $('#list_<%= @list.id %> ul').append("<%= escape_javascript(render(@task)) %>");
}
$('#new_task_title_<%= @list.id %>').val("");
setup_single_and_double_click($('#task_<%= @task.id %> span.task_title'), "");
setup_single_and_double_click($('#task_<%= @task.id %> span.date'), "");
<% unless @task.due_date.nil? %>
  add_task_to_upcoming(<%= raw @task.to_json %>.task);
setup_single_and_double_click($('#upcoming_task_<%= @task.id %> span.task_title'), "upcoming");
setup_single_and_double_click($('#upcoming_task_<%= @task.id %> span.date'), "upcoming");
<% end %>
